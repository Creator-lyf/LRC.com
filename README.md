# 基于物联网的远程实验实现方法
 这是基于树莓派的一种LRC网上实验教具的全部代码，包含
 
 1.PCF8591模块实现I2C通信获得电压的实现
 
 2.AD9850模块波形发生器发生任一频率的信号的实现
 
 3.GPIO口直接控制继电器的实现
 
 4.和阿里云物联网平台的基于MQTT协议的通信的实现
 
 5.CSV文件是用来存储实验数据的，用来分析LRC谐振电路的各项属性
 
 ## 整体电路包含

1.树莓派3b+

2.PCF8591模块

3.AD9850模块

4.电阻、电容、电感若干

5.差分放大器

6.AD637射频对数检波器

7.负电压模块

8.继电器

## 电路图
![Aaron Swartz](https://raw.githubusercontent.com/Creator-lyf/pw.com/master/电路图.png)

 整个实验的装置示意图如上图所示
### 电路工作原理
1、	树莓派作为整个电路系统的交互中枢，可以接受阿里云物联网平台的指令，也可以上传相关的实验数据。

2、	工作开始时，操作人员先在平台上下达频率的扫描区间要求，树莓派接收指令，像实验电路发出信号，控制继电器通断，这里的继电器功能类似于单刀三掷开关，可以有效的通过通断来控制LRC振荡电路的正常工作。

3、	AD9580是电路的交变信号源，它能提供一个微小的交变信号，通过差分放大模块AD620放大后，得到我们想要的低频信号。

4、	振荡信号在电路中形成后，其有效值被AD637读取模块获取，传递到PCF8951数模转换模块。

5、	PCF8951模块将获取的交变信号模拟量转化为数字量，最终反馈给树莓派。

6、	树莓派接受数字化的实验数据，上传回阿里云物联网平台。
（其中，AD9580、PCF8951、继电器、负电压模块皆由5伏的 直流源供电，读取模块AD620则由负电压模块产生的正负12伏电源供电。）

### 数据的收集及处理
1、	我们使用的是阿里云上的物联网平台功能，在我们自己编辑的应用中，输入LRC电路扫描工作的最大频率上限，电脑向设备发出指定的工作指令，电路根据指令，其工作电压对相应的频率，使电路的工作频率从0hz开始向最大频率上限扫描变化。整一个过程中得到的数据都被取样记录，并实时上传到阿里云的物联网平台。

2、	阿里云平台接收到数字信号，根据我们在物联网平台上搭建的应用，以一定的公式计算，对数据进行处理和计算，并拟定相应的电压曲线，计算相应的Q值。最终呈现在界面上的不仅有实时的电压-幅值数据，还有经过处理后整合的比如说Q-t的变化曲线。

3、	我们的这个应用界面生成的固定的二维码，在经过扫码，就可以快速的登录界面，得到自己想要的数据，并一定程度上实现对仪器的控制。

### 查看数据
扫描仪器上的二维码(永远是同一个，贴上去就好)，查看已存在云端中的实验简介，操作简介，及已有实验数据的相关信息，或者相关的使用说明视频。


